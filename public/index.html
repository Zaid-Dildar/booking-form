<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservation Form</title>
    <!-- ICONS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"
    />
    <!-- Font CSS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <!-- MAPBOX -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css"
      rel="stylesheet"
    />

    <!-- POPUP -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>

    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Book Your Ride</h1>
    <p class="description">
      Reserve your luxurious airport limo service for a comfortable and timely
      travel experience today.
    </p>

    <div>
      <div class="main-content">
        <!-- Car options for sidebar (shown on desktop) -->
        <div class="car-options-sidebar hidden-on-mobile">
          <h2>
            Select Vehicle <span style="color: red">*</span>
            <div class="error-message" id="car-option-error"></div>
          </h2>
          <div class="car-option" id="car-1">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Mercedes-sprinter-van.png"
                alt="Sprinter"
              />
            </div>
            <p>
              <strong>Sprinter</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 11 ,
                <i class="fas fa-suitcase" title="Bags"></i> 11</span
              >
              <span class="price-Sprinter">Starting at - $325.00</span>
            </p>
          </div>
          <div class="car-option" id="car-2">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Stretch-SUV.jpg"
                alt="Stretch SUV"
              />
            </div>
            <p>
              <strong>Stretch SUV</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 10 ,
                <i class="fas fa-suitcase" title="Bags"></i> 10</span
              >
              <span class="price-Stretch SUV">Starting at - $349.00</span>
            </p>
          </div>
          <div class="car-option" id="car-3">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/SUV.png"
                alt="SUV"
              />
            </div>
            <p>
              <strong>SUV</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 6 ,
                <i class="fas fa-suitcase" title="Bags"></i> 4</span
              >
              <span class="price-SUV">Starting at - $120.00</span>
            </p>
          </div>
          <div class="car-option" id="car-4">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Cadillac-Escalade-SUV.png"
                alt="Cadillac Escalade"
              />
            </div>
            <p>
              <strong>Cadillac Escalade SUV</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 6 ,
                <i class="fas fa-suitcase" title="Bags"></i> 6</span
              >
              <span class="price-Cadillac Escalade SUV"
                >Starting at - $210.00</span
              >
            </p>
          </div>
          <div class="car-option" id="car-5">
            <div
              class="car-option-image-container"
              style="padding: 1.25em 0 0.75em 0"
            >
              <img
                src="https://65e81151f52e248c552b-fe74cd567ea2f1228f846834bd67571e.ssl.cf1.rackcdn.com/ldm-images/2018-Toyota-Highlander-MIDNIGHT-BLACK-METALLIC.jpg"
                alt="Mid-Size SUV"
                style="width: 170.8px; height: 100px"
              />
            </div>
            <p>
              <strong>Mid-Size SUV</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 7 ,
                <i class="fas fa-suitcase" title="Bags"></i> 8</span
              >
              <span class="price-Mid-Size SUV">Starting at - $150.00</span>
            </p>
          </div>
          <div class="car-option" id="car-6">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Class-Mercedes.jpg"
                alt="Class Mercedes"
              />
            </div>
            <p>
              <strong>Class Mercedes</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 3 ,
                <i class="fas fa-suitcase" title="Bags"></i> 3</span
              >
              <span class="price-Class Mercedes">Starting at - $175.00</span>
            </p>
          </div>
          <div class="car-option" id="car-7">
            <div class="car-option-image-container">
              <img
                src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Cadillac-XTS.png"
                alt="Sedan"
              />
            </div>
            <p>
              <strong>Sedan</strong>
              <span
                ><i class="fas fa-user" title="Passengers"></i> 2 ,
                <i class="fas fa-suitcase" title="Bags"></i> 2</span
              >
              <span class="price-Sedan">Starting at - $85.00</span>
            </p>
          </div>
        </div>

        <form id="reservation-form" class="form-container">
          <!-- Form Type Tabs (Distance or Hourly) -->
          <div class="price-type-tabs">
            <button type="button" id="distance-tab" class="tab-button active">
              Distance-Based
            </button>
            <button type="button" id="hourly-tab" class="tab-button">
              Hourly-Based
            </button>
          </div>
          <!-- Row 1: First Name and Last Name -->
          <div class="form-row">
            <div class="form-group">
              <label for="first-name">First Name <span>*</span></label>
              <input type="text" id="first-name" name="first-name" />
              <div class="error-message" id="first-name-error"></div>
            </div>
            <div class="form-group">
              <label for="last-name">Last Name <span>*</span></label>
              <input type="text" id="last-name" name="last-name" />
              <div class="error-message" id="last-name-error"></div>
            </div>
          </div>

          <!-- Row 2: Email and Phone -->
          <div class="form-row">
            <div class="form-group">
              <label for="email">Email <span>*</span></label>
              <input type="email" id="email" name="email" />
              <div class="error-message" id="email-error"></div>
            </div>
            <div class="form-group">
              <label for="phone">Phone <span>*</span></label>
              <input type="tel" id="phone" name="phone" />
              <div class="error-message" id="phone-error"></div>
            </div>
          </div>

          <!-- Row 3: Passengers and Bags -->
          <div class="form-row">
            <div class="form-group">
              <label for="passengers">No. of Passengers <span>*</span></label>
              <input
                type="number"
                id="passengers"
                name="passengers"
                min="1"
                max="11"
              />
              <div class="error-message" id="passengers-error"></div>
            </div>
            <div class="form-group">
              <label for="bags">No. of Bags <span>*</span></label>
              <input type="number" id="bags" name="bags" min="0" max="11" />
              <div class="error-message" id="bags-error"></div>
            </div>
          </div>

          <!-- Row 4: Flight No. -->
          <div class="form-row">
            <div class="form-group">
              <label for="flight-no">Flight No. (Optional)</label>
              <input type="text" id="flight-no" name="flight-no" />
            </div>
          </div>

          <!-- No of Hours -->
          <div id="hours-row" class="form row form-group hidden">
            <label for="hours">No. of hours <span>*</span></label>
            <input id="hours" name="hours" type="number" min="1" value="1" />
            <div class="error-message" id="hours-error"></div>
          </div>

          <!-- Date and Time Picker -->
          <div class="form-row">
            <div class="form-group">
              <label for="pickup-date">Pickup Date <span>*</span></label>
              <input type="date" id="pickup-date" name="pickup-date" />
              <div class="error-message" id="pickup-date-error"></div>
              <div class="error-message hidden" id="pickup-date-close-error">
                Please select a valid date.
              </div>
            </div>
            <div class="form-group">
              <label for="pickup-time">Pickup Time <span>*</span></label>
              <input type="time" id="pickup-time" name="pickup-time" />
              <div class="error-message" id="pickup-time-error"></div>
              <div class="error-message hidden" id="pickup-time-close-error">
                Please select a time at least 3 hours from now.
              </div>
            </div>
          </div>

          <!-- Row 5: Pickup Location -->
          <div class="form-row">
            <div class="form-group">
              <label for="pickup">Pickup Location <span>*</span></label>
              <input
                id="pickup"
                type="text"
                name="pickup-location"
                autocomplete="off"
              />
              <div id="pickup-suggestions" class="suggestions"></div>
              <div class="error-message" id="pickup-error"></div>
            </div>
          </div>

          <!-- Row 6: Dropoff Location -->
          <div class="form-row">
            <div class="form-group">
              <label for="dropoff">Dropoff Location <span>*</span></label>
              <input
                type="text"
                id="dropoff"
                name="dropoff-location"
                autocomplete="off"
              />
              <div id="dropoff-suggestions" class="suggestions"></div>
              <div class="error-message" id="dropoff-error"></div>
            </div>
          </div>

          <!-- Row 6: Additional Location -->
          <div class="form-row">
            <div class="form-group">
              <label for="additional">Additional Location (Optional) </label>
              <input
                type="text"
                id="additional"
                name="additional-location"
                autocomplete="off"
              />
              <div id="additional-suggestions" class="suggestions"></div>
            </div>
          </div>

          <!-- Row 7: Additional Information -->
          <div class="form-row">
            <div class="form-group">
              <label for="additional-info"
                >Additional Information (Optional)</label
              >
              <textarea
                id="additional-info"
                name="additional-info"
                rows="4"
              ></textarea>
            </div>
          </div>

          <!-- Car Selection Slider -->
          <h2 class="hidden-on-desktop">
            Select Vehicle <span style="color: red">*</span>
            <div class="error-message" id="car-option-error"></div>
          </h2>

          <div class="swiper hidden-on-desktop">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <div class="car-option" id="car-1">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Mercedes-sprinter-van.png"
                      alt="Sprinter"
                    />
                  </div>
                  <p>
                    <strong>Sprinter</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 11 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 11</span
                    >
                    <span class="price-Sprinter">Starting at - $325.00</span>
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-2">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Stretch-SUV.jpg"
                      alt="Stretch SUV"
                    />
                  </div>
                  <p>
                    <strong>Stretch SUV</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 10 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 10</span
                    >
                    <span class="price-Stretch SUV">Starting at - $349.00</span>
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-3">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/SUV.png"
                      alt="SUV"
                    />
                  </div>
                  <p>
                    <strong>SUV</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 6 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 4</span
                    >
                    <span class="price-SUV">Starting at - $120.00</span>
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-4">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Cadillac-Escalade-SUV.png"
                      alt="Cadillac Escalade"
                    />
                  </div>
                  <p>
                    <strong>Cadillac Escalade SUV</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 6 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 6</span
                    >
                    <span class="price-Cadillac Escalade SUV"
                      >Starting at - $210.00</span
                    >
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-5">
                  <div class="car-option-image-container">
                    <img
                      src="https://65e81151f52e248c552b-fe74cd567ea2f1228f846834bd67571e.ssl.cf1.rackcdn.com/ldm-images/2018-Toyota-Highlander-MIDNIGHT-BLACK-METALLIC.jpg"
                      alt="Mid-Size SUV"
                    />
                  </div>
                  <p>
                    <strong>Mid-Size SUV</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 7 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 8</span
                    >
                    <span class="price-Mid-Size SUV"
                      >Starting at - $150.00</span
                    >
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-6">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Class-Mercedes.jpg"
                      alt="Class Mercedes"
                    />
                  </div>
                  <p>
                    <strong>Class Mercedes</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 3 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 3</span
                    >
                    <span class="price-Class Mercedes"
                      >Starting at - $175.00</span
                    >
                  </p>
                </div>
              </div>
              <div class="swiper-slide">
                <div class="car-option" id="car-7">
                  <div class="car-option-image-container">
                    <img
                      src="https://londonlimoservice.ca/wp-content/uploads/2021/07/Cadillac-XTS.png"
                      alt="Sedan"
                    />
                  </div>
                  <p>
                    <strong>Sedan</strong>
                    <span
                      ><i class="fas fa-user" title="Passengers"></i> 2 ,
                      <i class="fas fa-suitcase" title="Bags"></i> 2</span
                    >
                    <span class="price-Sedan">Starting at - $85.00</span>
                  </p>
                </div>
              </div>
            </div>

            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>

            <!-- Add Navigation -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>

          <!-- Mapbox Map -->
          <div class="map-container" id="map">
            <!-- Distance and Time Info -->
            <div class="map-overlay" id="directions-info">
              Distance: N/A | Duration: N/A
            </div>
          </div>

          <!-- Submit Button -->
          <button id="reserve-btn" type="submit" class="submit-btn">
            Reserve
          </button>

          <!-- Pop-up -->
          <div id="reservation-popup" class="white-popup mfp-hide">
            <!-- Gratuity Selection -->
            <div class="form-row">
              <div class="form-group">
                <label for="gratuity">Add Gratuity (Optional)</label>
                <select id="gratuity" name="gratuity">
                  <option value="0">No Gratuity</option>
                  <option value="15">15%</option>
                  <option value="20">20%</option>
                  <option value="25">25%</option>
                  <option value="custom">Custom Amount</option>
                </select>
                <div id="custom-gratuity-box" class="custom-gratuity">
                  <input
                    type="number"
                    id="custom-gratuity"
                    class="custom-gratuity"
                    placeholder="Custom Gratuity Amount($)"
                  />
                  <button
                    id="backToSelect"
                    type="button"
                    title="Go back to select menu"
                    class="backToSelect"
                  >
                    <i class="fas fa-arrow-left"></i>
                  </button>
                </div>
              </div>

              <!-- VIP Protocol Service -->
              <div class="form-group">
                <label for="vip-service">Add VIP Protocol Service</label>
                <select id="vip-service" name="vip-service">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                </select>
              </div>
            </div>

            <!-- Price Summary Section -->
            <div class="price-summary" class="pricing-section active">
              <h2 id="pricing-title">Distance-Based Price Summary</h2>
              <div class="price-row">
                <span id="pricing-fee-label">Distance fee</span>
                <span id="pricing-fee">$0.00</span>
              </div>
              <div id="gratuity-row" class="hidden">
                <span>Gratuity</span>
                <span id="gratuity-fee">$0.00</span>
              </div>
              <div id="vip-service-row" class="hidden">
                <span>VIP Service</span>
                <span id="vip-fee">$0.00</span>
              </div>
              <div class="hidden">
                <span>Tax (13%)</span>
                <span id="tax-fee">$0.00</span>
              </div>
              <hr />
              <div class="price-row total">
                <strong>Total</strong>
                <strong id="total-price">$0.00</strong>
              </div>
              <p class="notes">
                Includes surcharge of 13%. Additional charges may apply if the
                driver has to detour for any unforeseen circumstances.
              </p>
            </div>

            <!-- Hidden input field to hold the final price to be sent to the API -->
            <input
              type="hidden"
              id="final-price"
              name="final_price"
              value="0.00"
            />

            <!-- Hidden input for storing payment method -->
            <input
              type="hidden"
              id="payment-method"
              name="payment_method"
              value="cash"
            />

            <!-- Payment Method Selection -->
            <div class="payment-method">
              <h3>Select Payment Method</h3>
              <button id="cash-btn" type="button" class="btn btn-success">
                Cash
              </button>
              <button id="card-btn" type="button" class="btn btn-choice">
                Credit Card
              </button>
            </div>

            <!-- Stripe Card Payment Form (hidden initially) -->
            <div id="card-payment-section" class="hidden">
              <h3>Enter Card Details</h3>
              <div id="card-element">
                <!-- Stripe Element will be inserted here -->
              </div>
              <div id="card-errors" role="alert" class="error-message"></div>
              <button
                id="pay-now-btn"
                type="button"
                class="btn btn-success"
                style="margin-top: 20px"
              >
                Pay Now
              </button>
            </div>

            <!-- Popup action buttons -->
            <div class="popup-actions" style="margin-top: 20px">
              <button id="confirm-btn" class="btn btn-success">Confirm</button>
              <button type="button" id="edit-btn" class="btn btn-secondary">
                Edit
              </button>
              <button id="cancel-btn" class="btn btn-secondary">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>

    <script src="app.js"></script>
  </body>
</html>
