<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reservation Form</title>
    <!-- ICONS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"
    />
    <!-- Font CSS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <!-- MAPBOX -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css"
      rel="stylesheet"
    />

    <!-- POPUP -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Book Your Ride</h1>
    <p class="description">
      Reserve your luxurious airport limo service for a comfortable and timely
      travel experience today.
    </p>
    <div class="form-container">
      <form id="reservation-form">
        <!-- Row 1: First Name and Last Name -->
        <div class="form-row">
          <div class="form-group">
            <label for="first-name">First Name <span>*</span></label>
            <input type="text" id="first-name" name="first-name" />
            <div class="error-message" id="first-name-error"></div>
          </div>
          <div class="form-group">
            <label for="last-name">Last Name <span>*</span></label>
            <input type="text" id="last-name" name="last-name" />
            <div class="error-message" id="last-name-error"></div>
          </div>
        </div>

        <!-- Row 2: Email and Phone -->
        <div class="form-row">
          <div class="form-group">
            <label for="email">Email <span>*</span></label>
            <input type="email" id="email" name="email" />
            <div class="error-message" id="email-error"></div>
          </div>
          <div class="form-group">
            <label for="phone">Phone <span>*</span></label>
            <input type="tel" id="phone" name="phone" />
            <div class="error-message" id="phone-error"></div>
          </div>
        </div>

        <!-- Row 3: Passengers and Bags -->
        <div class="form-row">
          <div class="form-group">
            <label for="passengers">No. of Passengers <span>*</span></label>
            <input
              type="number"
              id="passengers"
              name="passengers"
              min="1"
              max="11"
            />
            <div class="error-message" id="passengers-error"></div>
          </div>
          <div class="form-group">
            <label for="bags">No. of Bags <span>*</span></label>
            <input type="number" id="bags" name="bags" min="0" max="11" />
            <div class="error-message" id="bags-error"></div>
          </div>
        </div>

        <!-- Row 4: Flight No. -->
        <div class="form-row">
          <div class="form-group">
            <label for="flight-no">Flight No. (Optional)</label>
            <input type="text" id="flight-no" name="flight-no" />
          </div>
        </div>

        <!-- Date and Time Picker -->
        <div class="form-row">
          <div class="form-group">
            <label for="pickup-date">Pickup Date <span>*</span></label>
            <input type="date" id="pickup-date" name="pickup-date" />
            <div class="error-message" id="pickup-date-error"></div>
            <div class="error-message hidden" id="pickup-date-close-error">
              Please select a date at least 24 hours from now.
            </div>
          </div>
          <div class="form-group">
            <label for="pickup-time">Pickup Time <span>*</span></label>
            <input type="time" id="pickup-time" name="pickup-time" />
            <div class="error-message" id="pickup-time-error"></div>
          </div>
        </div>

        <!-- Row 5: Pickup Location -->
        <div class="form-row">
          <div class="form-group">
            <label for="pickup">Pickup Location <span>*</span></label>
            <input
              id="pickup"
              type="text"
              name="pickup-location"
              autocomplete="off"
            />
            <div id="pickup-suggestions" class="suggestions"></div>
            <div class="error-message" id="pickup-error"></div>
          </div>
        </div>

        <!-- Row 6: Dropoff Location -->
        <div class="form-row">
          <div class="form-group">
            <label for="dropoff">Dropoff Location <span>*</span></label>
            <input
              type="text"
              id="dropoff"
              name="dropoff-location"
              autocomplete="off"
            />
            <div id="dropoff-suggestions" class="suggestions"></div>
            <div class="error-message" id="dropoff-error"></div>
          </div>
        </div>

        <!-- Row 7: Additional Information -->
        <div class="form-row">
          <div class="form-group">
            <label for="additional-info"
              >Additional Information (Optional)</label
            >
            <textarea
              id="additional-info"
              name="additional-info"
              rows="4"
            ></textarea>
          </div>
        </div>

        <!-- Car Selection Slider -->
        <h2>
          Select Vehicle <span style="color: red">*</span>
          <div class="error-message" id="car-option-error"></div>
        </h2>

        <div class="swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <div class="car-option" id="car-1">
                <img
                  src="https://tse4.mm.bing.net/th?id=OIP.P0BMInnXUw80TgcgvD7xLAHaE6&pid=Api&P=0&h=220"
                  alt="Sprinter"
                />
                <p>
                  <strong>Sprinter</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 11 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 11</span
                  >
                  <span>Price - $325.00</span>
                </p>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="car-option" id="car-2">
                <img
                  src="https://tse4.mm.bing.net/th?id=OIP.6YJFG8mnarCyCsHq0KEjjQHaEs&pid=Api&P=0&h=220"
                  alt="Stretch SUV"
                />
                <p>
                  <strong>Stretch SUV</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 10 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 10</span
                  >
                  <span>Price - $349.00</span>
                </p>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="car-option" id="car-3">
                <img
                  src="https://tse4.mm.bing.net/th?id=OIP.NHLgMW7GCzTDwPKybHrZkwHaD1&pid=Api&P=0&h=220"
                  alt="SUV"
                />
                <p>
                  <strong>SUV</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 6 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 4</span
                  >
                  <span>Price - $120.00</span>
                </p>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="car-option" id="car-4">
                <img
                  src="https://tse4.mm.bing.net/th?id=OIP.9Hq2YjHvd9NmV2NBTKBpDgHaEJ&pid=Api&P=0&h=220"
                  alt="Cadillac Escalade"
                />
                <p>
                  <strong>Cadillac Escalade SUV</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 6 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 6</span
                  >
                  <span>Price - $210.00</span>
                </p>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="car-option" id="car-5">
                <img
                  src="https://tse2.mm.bing.net/th?id=OIP.jYo1WWUxBv5xpsHw4qNPNwHaE6&pid=Api&P=0&h=220"
                  alt="Class Mercedes"
                />
                <p>
                  <strong>Class Mercedes</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 3 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 3</span
                  >
                  <span>Price - $175.00</span>
                </p>
              </div>
            </div>
            <div class="swiper-slide">
              <div class="car-option" id="car-6">
                <img
                  src="https://tse2.mm.bing.net/th?id=OIP.aLJK0LXsgEEJVn91Hsbw-gHaDP&pid=Api&P=0&h=220"
                  alt="Sedan"
                />
                <p>
                  <strong>Sedan</strong>
                  <span
                    ><i class="fas fa-user" title="Passengers"></i> 2 ,
                    <i class="fas fa-suitcase" title="Bags"></i> 2</span
                  >
                  <span>Price - $85.00</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Add Pagination -->
          <div class="swiper-pagination"></div>

          <!-- Add Navigation -->
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>

        <!-- Submit Button -->
        <button id="reserve-btn" type="submit" class="submit-btn">
          Reserve
        </button>

        <!-- Pop-up -->
        <div id="reservation-popup" class="white-popup mfp-hide">
          <!-- Mapbox Map -->
          <div class="map-container" id="map">
            <!-- Distance and Time Info -->
            <div class="map-overlay" id="directions-info">
              Distance: N/A | Duration: N/A
            </div>
          </div>

          <!-- Gratuity Selection -->
          <div class="form-row">
            <div class="form-group">
              <label for="gratuity">Add Gratuity (Optional)</label>
              <select id="gratuity" name="gratuity">
                <option value="0">No Gratuity</option>
                <option value="5">5%</option>
                <option value="10">10%</option>
                <option value="15">15%</option>
                <option value="20">20%</option>
                <option value="25">25%</option>
                <option value="custom">Custom Amount</option>
              </select>
              <div id="custom-gratuity-box" class="custom-gratuity">
                <input
                  type="number"
                  id="custom-gratuity"
                  class="custom-gratuity"
                  placeholder="Custom Gratuity Amount($)"
                />
                <button
                  id="backToSelect"
                  type="button"
                  title="Go back to select menu"
                  class="backToSelect"
                >
                  <i class="fas fa-arrow-left"></i>
                </button>
              </div>
            </div>

            <!-- VIP Protocol Service -->
            <div class="form-group">
              <label for="vip-service">Add VIP Protocol Service</label>
              <select id="vip-service" name="vip-service">
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
          </div>

          <!-- No of Hours -->
          <div id="hours-row" class="form row form-group hidden">
            <label for="hours">No. of hours <span>*</span></label>
            <input id="hours" name="hours" type="number" min="1" value="1" />
            <div class="error-message" id="hours-error"></div>
          </div>

          <!-- Price Summary Section -->
          <!-- Price Type Tabs (Distance or Hourly) -->
          <div class="price-type-tabs">
            <button type="button" id="distance-tab" class="tab-button active">
              Distance-Based
            </button>
            <button type="button" id="hourly-tab" class="tab-button">
              Hourly-Based
            </button>
          </div>

          <!-- Unified Price Summary Section -->
          <div id="price-summary" class="pricing-section active">
            <h2 id="pricing-title">Distance-Based Price Summary</h2>
            <div class="price-row">
              <span id="pricing-fee-label">Distance fee</span>
              <span id="pricing-fee">$0.00</span>
            </div>
            <div id="gratuity-row" class="hidden">
              <span>Gratuity</span>
              <span id="gratuity-fee">$0.00</span>
            </div>
            <div id="vip-service-row" class="hidden">
              <span>VIP Service</span>
              <span id="vip-fee">$0.00</span>
            </div>
            <div class="price-row">
              <span>Tax (13%)</span>
              <span id="tax-fee">$0.00</span>
            </div>
            <hr />
            <div class="price-row total">
              <strong>Total</strong>
              <strong id="total-price">$0.00</strong>
            </div>
            <p class="notes">
              Includes surcharge of 13%. Additional charges may apply if the
              driver has to detour for any unforeseen circumstances.
            </p>
          </div>

          <!-- Hidden input field to hold the final price to be sent to the API -->
          <input
            type="hidden"
            id="final-price"
            name="final_price"
            value="0.00"
          />

          <!-- Popup action buttons -->
          <div class="popup-actions">
            <button id="confirm-btn" class="btn btn-success">Confirm</button>
            <button id="edit-btn" class="btn btn-secondary">Cancel</button>
          </div>
        </div>
      </form>
    </div>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>

    <script src="app.js"></script>
  </body>
</html>
